/* ===========================
   Diseño global
   =========================== */

:root {
  /* Colores base (HSL para que sea más fácil jugar con ellos) */
  --color-bg: hsl(210, 30%, 10%);
  --color-surface: hsl(210, 20%, 18%);
  --color-accent: hsl(200, 90%, 55%);
  --color-accent-soft: hsl(200, 90%, 35%);
  --color-text: hsl(0, 0%, 96%);
  --color-text-muted: hsl(0, 0%, 70%);

  /* Colores del piano */
  --key-white-bg: hsl(0, 0%, 98%);
  --key-white-border: hsl(0, 0%, 80%);
  --key-black-bg: hsl(0, 0%, 12%);
  --key-black-highlight: hsl(0, 0%, 20%);
  --key-active: hsl(45, 100%, 60%);

  /* Dimensiones */
  --page-padding: 1.5rem;
  --piano-max-width: 900px;
  --key-white-width: 4rem;
  --key-white-height: 12rem;
  --key-black-width: 2.4rem;
  --key-black-height: 7rem;
  --key-radius: 0.5rem;

  /* Sombra */
  --shadow-soft: 0 10px 25px rgba(0, 0, 0, 0.3);
  --transition-fast: 120ms ease-out;
  --transition-medium: 200ms ease-out;
}

/* Reset suave básico */
*,
*::before,
*::after {
  box-sizing: border-box;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
    sans-serif;
  background-color: var(--color-bg);
  color: var(--color-text);
}

/* ===========================
   Layout de página
   =========================== */

.page {
  min-height: 100vh;
  padding: var(--page-padding);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  gap: 1.5rem;
}

.page__header {
  text-align: center;
}

.page__title {
  margin: 0;
  font-size: clamp(1.8rem, 2.2vw + 1rem, 2.4rem);
}

.page__subtitle {
  margin-top: 0.25rem;
  margin-bottom: 0;
  font-size: 0.95rem;
  color: var(--color-text-muted);
}

/* ===========================
   Piano
   =========================== */

.piano {
  width: 100%;
  max-width: var(--piano-max-width);
  background-color: var(--color-surface);
  border-radius: 1rem;
  padding: 1.5rem;
  box-shadow: var(--shadow-soft);
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.piano__header,
.piano__footer {
  display: flex;
  justify-content: center;
  align-items: center;
}

.piano__control-group {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.piano__label {
  font-size: 0.9rem;
}

.piano__select {
  padding: 0.35rem 0.75rem;
  border-radius: 999px;
  border: 1px solid var(--color-accent-soft);
  background-color: transparent;
  color: var(--color-text);
  outline: none;
}

.piano__select:focus-visible {
  outline: 2px solid var(--color-accent);
}

/* ===========================
   Teclado
   =========================== */

.piano__keyboard {
  position: relative; /* Contenedor de referencia para las teclas negras */
  width: 100%;
  overflow: hidden;
}

/* Teclas blancas: flex */
.piano__white-keys {
  display: flex;
  justify-content: center;
  gap: 0.1rem;
  padding: 0.4rem;
  background: radial-gradient(
    circle at top,
    hsl(0, 0%, 35%),
    hsl(0, 0%, 10%)
  );
  border-radius: 0.8rem;
}

/* Estilo base de todas las teclas */
.piano__key {
  border: none;
  padding: 0;
  cursor: pointer;
  position: relative;
  transition:
    transform var(--transition-fast),
    box-shadow var(--transition-fast),
    background-color var(--transition-fast),
    filter var(--transition-fast);
}

/* Teclas blancas */
.piano__key--white {
  width: var(--key-white-width);
  height: var(--key-white-height);
  background: linear-gradient(
    to bottom,
    var(--key-white-bg),
    hsl(0, 0%, 94%)
  );
  border-radius: 0 0 var(--key-radius) var(--key-radius);
  border: 1px solid var(--key-white-border);
  box-shadow: 0 3px 4px rgba(0, 0, 0, 0.3);
  display: flex;
  align-items: flex-end;
  justify-content: center;
  font-size: 0.9rem;
  color: hsl(0, 0%, 20%);
}

/* Teclas negras: reubicación con position + transform */
.piano__black-keys {
  position: absolute;
  inset: 0;
  pointer-events: none; /* las teclas dentro vuelven a activarlo */
}

.piano__key--black {
  pointer-events: auto;
  position: absolute;
  width: var(--key-black-width);
  height: var(--key-black-height);
  background: linear-gradient(
    to bottom,
    var(--key-black-bg),
    var(--key-black-highlight)
  );
  border-radius: 0 0 0.4rem 0.4rem;
  box-shadow: 0 6px 10px rgba(0, 0, 0, 0.6);
  border: 1px solid hsl(0, 0%, 5%);
}

/* Posición relativa respecto al ancho del teclado (aprox) */
.piano__key--black--csharp {
  left: calc(100% * 1 / 8 * 0.75);
  transform: translateX(-50%);
}

.piano__key--black--dsharp {
  left: calc(100% * 2 / 8 * 0.9);
  transform: translateX(-50%);
}

/* No hay tecla negra entre E y F */

.piano__key--black--fsharp {
  left: calc(100% * 4 / 8 * 0.95);
  transform: translateX(-50%);
}

.piano__key--black--gsharp {
  left: calc(100% * 5 / 8 * 1.05);
  transform: translateX(-50%);
}

.piano__key--black--asharp {
  left: calc(100% * 6 / 8 * 1.15);
  transform: translateX(-50%);
}

/* ===========================
   Estados interactivos
   =========================== */

.piano__key--white:hover {
  filter: brightness(1.03);
}

.piano__key--black:hover {
  filter: brightness(1.3);
}

/* Cuando suenan: clase añadida desde JS */
.piano__key--active.piano__key--white {
  background: var(--key-active);
}

.piano__key--active.piano__key--black {
  background: hsl(45, 100%, 40%);
}

/* Simular que la tecla se hunde */
.piano__key--active {
  transform: translateY(3px);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.6);
}

.piano__help {
  margin: 0;
  font-size: 0.85rem;
  color: var(--color-text-muted);
  text-align: center;
}

/* ===========================
   Responsividad
   =========================== */

@media (max-width: 600px) {
  :root {
    --key-white-width: 2.7rem;
    --key-white-height: 8rem;
    --key-black-width: 1.7rem;
    --key-black-height: 5rem;
  }

  .page {
    padding: 1rem 0.5rem;
  }

  .piano {
    padding: 1rem;
  }
}
